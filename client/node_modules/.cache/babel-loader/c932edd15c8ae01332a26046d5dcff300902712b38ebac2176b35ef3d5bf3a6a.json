{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/StoreOrderSystem_ReadyToDeploy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[summary,setSummary]=useState(null);const[recentOrders,setRecentOrders]=useState([]);const[totalPayments,setTotalPayments]=useState(0);useEffect(()=>{fetchSummary();const interval=setInterval(fetchSummary,10000);return()=>clearInterval(interval);},[]);const fetchSummary=async()=>{const res=await fetch(\"${process.env.REACT_APP_API_BASE}/api/summary\");const data=await res.json();setSummary(data);// Fetch recent orders (merge all store orders)\nconst allOrders=[];for(const store of data.storeStats){const res=await fetch(\"\".concat(process.env.REACT_APP_API_BASE,\"/api/orders/\").concat(store.store));const orders=await res.json();orders.forEach((order,idx)=>{allOrders.push(_objectSpread(_objectSpread({},order),{},{store:store.store,index:idx}));});}allOrders.sort((a,b)=>new Date(b.date)-new Date(a.date));setRecentOrders(allOrders.slice(0,5));// Fetch payments\nlet total=0;for(const store of data.storeStats){const res=await fetch(\"\".concat(process.env.REACT_APP_API_BASE,\"/api/payments/\").concat(store.store));const payments=await res.json();payments.forEach(p=>total+=parseFloat(p.amount||0));}setTotalPayments(total.toFixed(2));};if(!summary)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading dashboard...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard Overview\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"1rem\",marginBottom:\"2rem\"},children:[/*#__PURE__*/_jsx(Card,{title:\"Total Stores\",value:summary.totalStores,color:\"#3b82f6\",icon:\"\\uD83C\\uDFEA\"}),/*#__PURE__*/_jsx(Card,{title:\"Total Orders\",value:summary.totalOrders,color:\"#10b981\",icon:\"\\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(Card,{title:\"Pending Orders\",value:summary.storeStats.reduce((sum,s)=>sum+s.pending,0),color:\"#facc15\",icon:\"\\u23F3\"}),/*#__PURE__*/_jsx(Card,{title:\"Total Payments\",value:\"\\u20B9\".concat(totalPayments),color:\"#a855f7\",icon:\"\\uD83D\\uDCB0\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"2rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Orders\"}),/*#__PURE__*/_jsx(\"ul\",{children:recentOrders.map((o,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Order #\",o.index+1,\" - \",o.customer,\" \\u2014\",/*#__PURE__*/_jsx(\"span\",{style:{color:o.status===\"Delivered\"?\"green\":o.status===\"Preparing\"?\"blue\":\"orange\"},children:o.status}),\" \\u2014 \",/*#__PURE__*/_jsx(\"small\",{children:o.date})]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Store Performance\"}),/*#__PURE__*/_jsx(\"ul\",{children:summary.storeStats.map((s,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[s.store,\" \\u2014 \",s.orderCount,\" orders\"]},i))})]})]})]});};// Card UI Component\nconst Card=_ref=>{let{title,value,color,icon}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:\"#f9fafb\",padding:\"1rem\",borderRadius:\"10px\",border:\"2px solid \".concat(color)},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"2rem\"},children:icon}),/*#__PURE__*/_jsx(\"h4\",{style:{margin:0},children:title}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"1.5rem\",fontWeight:\"bold\"},children:value})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Home","summary","setSummary","recentOrders","setRecentOrders","totalPayments","setTotalPayments","fetchSummary","interval","setInterval","clearInterval","res","fetch","data","json","allOrders","store","storeStats","concat","process","env","REACT_APP_API_BASE","orders","forEach","order","idx","push","_objectSpread","index","sort","a","b","Date","date","slice","total","payments","p","parseFloat","amount","toFixed","children","style","padding","display","gap","marginBottom","Card","title","value","totalStores","color","icon","totalOrders","reduce","sum","s","pending","flex","map","o","i","customer","status","orderCount","_ref","background","borderRadius","border","fontSize","margin","fontWeight"],"sources":["C:/Users/user/Desktop/StoreOrderSystem_ReadyToDeploy/client/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nconst Home = () => {\r\n  const [summary, setSummary] = useState(null);\r\n  const [recentOrders, setRecentOrders] = useState([]);\r\n  const [totalPayments, setTotalPayments] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchSummary();\r\n    const interval = setInterval(fetchSummary, 10000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchSummary = async () => {\r\n    const res = await fetch(\"${process.env.REACT_APP_API_BASE}/api/summary\");\r\n    const data = await res.json();\r\n    setSummary(data);\r\n\r\n    // Fetch recent orders (merge all store orders)\r\n    const allOrders = [];\r\n    for (const store of data.storeStats) {\r\n      const res = await fetch(`${process.env.REACT_APP_API_BASE}/api/orders/${store.store}`);\r\n      const orders = await res.json();\r\n      orders.forEach((order, idx) => {\r\n        allOrders.push({ ...order, store: store.store, index: idx });\r\n      });\r\n    }\r\n    allOrders.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n    setRecentOrders(allOrders.slice(0, 5));\r\n\r\n    // Fetch payments\r\n    let total = 0;\r\n    for (const store of data.storeStats) {\r\n      const res = await fetch(`${process.env.REACT_APP_API_BASE}/api/payments/${store.store}`);\r\n      const payments = await res.json();\r\n      payments.forEach(p => total += parseFloat(p.amount || 0));\r\n    }\r\n    setTotalPayments(total.toFixed(2));\r\n  };\r\n\r\n  if (!summary) return <div>Loading dashboard...</div>;\r\n\r\n  return (\r\n    <div style={{ padding: \"2rem\" }}>\r\n      <h1>Dashboard Overview</h1>\r\n\r\n      {/* Top Cards */}\r\n      <div style={{ display: \"flex\", gap: \"1rem\", marginBottom: \"2rem\" }}>\r\n        <Card title=\"Total Stores\" value={summary.totalStores} color=\"#3b82f6\" icon=\"🏪\" />\r\n        <Card title=\"Total Orders\" value={summary.totalOrders} color=\"#10b981\" icon=\"🛒\" />\r\n        <Card title=\"Pending Orders\" value={summary.storeStats.reduce((sum, s) => sum + s.pending, 0)} color=\"#facc15\" icon=\"⏳\" />\r\n        <Card title=\"Total Payments\" value={`₹${totalPayments}`} color=\"#a855f7\" icon=\"💰\" />\r\n      </div>\r\n\r\n      {/* 2 Column Layout */}\r\n      <div style={{ display: \"flex\", gap: \"2rem\" }}>\r\n        <div style={{ flex: 1 }}>\r\n          <h3>Recent Orders</h3>\r\n          <ul>\r\n            {recentOrders.map((o, i) => (\r\n              <li key={i}>\r\n                Order #{o.index + 1} - {o.customer} — \r\n                <span style={{ color: o.status === \"Delivered\" ? \"green\" : o.status === \"Preparing\" ? \"blue\" : \"orange\" }}>\r\n                  {o.status}\r\n                </span> — <small>{o.date}</small>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n\r\n        <div style={{ flex: 1 }}>\r\n          <h3>Store Performance</h3>\r\n          <ul>\r\n            {summary.storeStats.map((s, i) => (\r\n              <li key={i}>\r\n                {s.store} — {s.orderCount} orders\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Card UI Component\r\nconst Card = ({ title, value, color, icon }) => (\r\n  <div style={{\r\n    flex: 1,\r\n    background: \"#f9fafb\",\r\n    padding: \"1rem\",\r\n    borderRadius: \"10px\",\r\n    border: `2px solid ${color}`\r\n  }}>\r\n    <div style={{ fontSize: \"2rem\" }}>{icon}</div>\r\n    <h4 style={{ margin: 0 }}>{title}</h4>\r\n    <p style={{ fontSize: \"1.5rem\", fontWeight: \"bold\" }}>{value}</p>\r\n  </div>\r\n);\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}