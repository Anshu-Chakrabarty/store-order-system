{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/StoreOrderSystem_ReadyToDeploy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Products=()=>{const[stores,setStores]=useState([]);const[products,setProducts]=useState([]);const[form,setForm]=useState({storeName:\"\",name:\"\",price:\"\",quantity:\"\"});const[editingIndex,setEditingIndex]=useState(null);useEffect(()=>{fetch(\"${process.env.REACT_APP_API_BASE}/api/stores\").then(res=>res.json()).then(data=>setStores(data));fetchProducts();},[]);const fetchProducts=()=>{fetch(\"${process.env.REACT_APP_API_BASE}/api/products\").then(res=>res.json()).then(data=>setProducts(data));};const handleSubmit=async()=>{if(!form.storeName||!form.name||!form.price){alert(\"Please fill all fields\");return;}const payload=_objectSpread({},form);if(editingIndex!==null){// EDIT mode\nawait fetch(\"\".concat(process.env.REACT_APP_API_BASE,\"/api/products/\").concat(editingIndex),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});alert(\"Product updated!\");}else{// ADD mode\nawait fetch(\"${process.env.REACT_APP_API_BASE}/api/products\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});alert(\"Product added!\");}setForm({storeName:\"\",name:\"\",price:\"\",quantity:\"\"});setEditingIndex(null);fetchProducts();};const handleEdit=(product,indexInFullArray)=>{setForm({storeName:product.storeName,name:product.name,price:product.price,quantity:product.quantity||\"\"});setEditingIndex(indexInFullArray);};const handleDelete=async index=>{if(!window.confirm(\"Delete this product?\"))return;await fetch(\"\".concat(process.env.REACT_APP_API_BASE,\"/api/products/\").concat(index),{method:\"DELETE\"});fetchProducts();};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingIndex!==null?\"Edit Product\":\"Add Product\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"select\",{value:form.storeName,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{storeName:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Store\"}),stores.map((s,i)=>/*#__PURE__*/_jsx(\"option\",{value:s.name,children:s.name},i))]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Product Name\",value:form.name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Price\",type:\"number\",value:form.price,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{price:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Quantity\",type:\"number\",value:form.quantity,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{quantity:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:editingIndex!==null?\"Update Product\":\"Add Product\"})]}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:\"2rem\"},children:\"All Products\"}),stores.map((store,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:store.name}),/*#__PURE__*/_jsx(\"ul\",{children:products.map((p,index)=>p.storeName===store.name?/*#__PURE__*/_jsxs(\"li\",{children:[p.name,\" \\u2014 \\u20B9\",p.price,\" \\u2014 Qty: \",p.quantity||0,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(p,index),style:{marginLeft:\"1rem\"},children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(index),style:{marginLeft:\"0.5rem\"},className:\"danger\",children:\"\\u274C Delete\"})]},index):null)})]},i))]});};export default Products;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Products","stores","setStores","products","setProducts","form","setForm","storeName","name","price","quantity","editingIndex","setEditingIndex","fetch","then","res","json","data","fetchProducts","handleSubmit","alert","payload","_objectSpread","concat","process","env","REACT_APP_API_BASE","method","headers","body","JSON","stringify","handleEdit","product","indexInFullArray","handleDelete","index","window","confirm","className","children","value","onChange","e","target","map","s","i","placeholder","type","onClick","style","marginTop","store","marginBottom","p","marginLeft"],"sources":["C:/Users/user/Desktop/StoreOrderSystem_ReadyToDeploy/client/src/pages/Products.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nconst Products = () => {\r\n  const [stores, setStores] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [form, setForm] = useState({ storeName: \"\", name: \"\", price: \"\", quantity: \"\" });\r\n  const [editingIndex, setEditingIndex] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"${process.env.REACT_APP_API_BASE}/api/stores\")\r\n      .then(res => res.json())\r\n      .then(data => setStores(data));\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = () => {\r\n    fetch(\"${process.env.REACT_APP_API_BASE}/api/products\")\r\n      .then(res => res.json())\r\n      .then(data => setProducts(data));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!form.storeName || !form.name || !form.price) {\r\n      alert(\"Please fill all fields\");\r\n      return;\r\n    }\r\n\r\n    const payload = { ...form };\r\n\r\n    if (editingIndex !== null) {\r\n      // EDIT mode\r\n      await fetch(`${process.env.REACT_APP_API_BASE}/api/products/${editingIndex}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      alert(\"Product updated!\");\r\n    } else {\r\n      // ADD mode\r\n      await fetch(\"${process.env.REACT_APP_API_BASE}/api/products\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      alert(\"Product added!\");\r\n    }\r\n\r\n    setForm({ storeName: \"\", name: \"\", price: \"\", quantity: \"\" });\r\n    setEditingIndex(null);\r\n    fetchProducts();\r\n  };\r\n\r\n  const handleEdit = (product, indexInFullArray) => {\r\n    setForm({\r\n      storeName: product.storeName,\r\n      name: product.name,\r\n      price: product.price,\r\n      quantity: product.quantity || \"\"\r\n    });\r\n    setEditingIndex(indexInFullArray);\r\n  };\r\n\r\n  const handleDelete = async (index) => {\r\n    if (!window.confirm(\"Delete this product?\")) return;\r\n    await fetch(`${process.env.REACT_APP_API_BASE}/api/products/${index}`, {\r\n      method: \"DELETE\"\r\n    });\r\n    fetchProducts();\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>{editingIndex !== null ? \"Edit Product\" : \"Add Product\"}</h2>\r\n      <div className=\"card\">\r\n        <select\r\n          value={form.storeName}\r\n          onChange={e => setForm({ ...form, storeName: e.target.value })}\r\n        >\r\n          <option value=\"\">Select Store</option>\r\n          {stores.map((s, i) => (\r\n            <option key={i} value={s.name}>{s.name}</option>\r\n          ))}\r\n        </select>\r\n        <input\r\n          placeholder=\"Product Name\"\r\n          value={form.name}\r\n          onChange={e => setForm({ ...form, name: e.target.value })}\r\n        />\r\n        <input\r\n          placeholder=\"Price\"\r\n          type=\"number\"\r\n          value={form.price}\r\n          onChange={e => setForm({ ...form, price: e.target.value })}\r\n        />\r\n        <input\r\n          placeholder=\"Quantity\"\r\n          type=\"number\"\r\n          value={form.quantity}\r\n          onChange={e => setForm({ ...form, quantity: e.target.value })}\r\n        />\r\n        <button onClick={handleSubmit}>\r\n          {editingIndex !== null ? \"Update Product\" : \"Add Product\"}\r\n        </button>\r\n      </div>\r\n\r\n      <h3 style={{ marginTop: \"2rem\" }}>All Products</h3>\r\n      {stores.map((store, i) => (\r\n        <div key={i} style={{ marginBottom: \"1rem\" }}>\r\n          <strong>{store.name}</strong>\r\n          <ul>\r\n            {products.map((p, index) =>\r\n              p.storeName === store.name ? (\r\n                <li key={index}>\r\n                  {p.name} — ₹{p.price} — Qty: {p.quantity || 0}\r\n                  <button\r\n                    onClick={() => handleEdit(p, index)}\r\n                    style={{ marginLeft: \"1rem\" }}\r\n                  >\r\n                    ✏️ Edit\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(index)}\r\n                    style={{ marginLeft: \"0.5rem\" }}\r\n                    className=\"danger\"\r\n                  >\r\n                    ❌ Delete\r\n                  </button>\r\n                </li>\r\n              ) : null\r\n            )}\r\n          </ul>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}